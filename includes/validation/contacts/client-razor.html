

<h4 id="requiresauth.cshtml">_RequiresAuth.cshtml<a class="header-anchor" href="javascript:;" onclick="location.hash='#requiresauth.cshtml'" aria-label="Permalink"> </a></h4>
<pre><code class="language-html">@{ RedirectIfNotAuthenticated($&quot;/client-razor/login?continue={Request.PathInfo}&quot;); }

&lt;div style=&quot;text-align:right&quot;&gt;
    &lt;small class=&quot;text-muted&quot;&gt;
        @UserSession.DisplayName
        | &lt;a href=&quot;/auth/logout?continue=/client-razor/&quot;&gt;Sign Out&lt;/a&gt;
    &lt;/small&gt;
&lt;/div&gt;
</code></pre>
<h4 id="default.cshtml">default.cshtml<a class="header-anchor" href="javascript:;" onclick="location.hash='#default.cshtml'" aria-label="Permalink"> </a></h4>
<pre><code class="language-html">@await Html.PartialAsync(&quot;_RequiresAuth&quot;)

&lt;h3&gt;Add new Contact&lt;/h3&gt;

&lt;form action=&quot;/contacts&quot; method=&quot;post&quot; class=&quot;col-lg-4&quot;&gt;
    &lt;div class=&quot;form-group&quot; data-validation-summary=&quot;title,name,color,filmGenres,age,agree&quot;&gt;&lt;/div&gt;

    &lt;div class=&quot;form-group&quot;&gt;
        &lt;div class=&quot;form-check&quot;&gt;
        @foreach (var it in Html.ContactTitles())
        {
            &lt;div class=&quot;custom-control custom-radio custom-control-inline&quot;&gt;
                &lt;input type=&quot;radio&quot; id=&quot;title-@it.Key&quot; name=&quot;title&quot; value=&quot;@it.Key&quot; class=&quot;custom-control-input&quot;&gt;
                &lt;label class=&quot;custom-control-label&quot; for=&quot;title-@it.Key&quot;&gt;@it.Value&lt;/label&gt;
            &lt;/div&gt;
        }
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form-group&quot;&gt;
        &lt;label for=&quot;name&quot;&gt;Full Name&lt;/label&gt;
        &lt;input class=&quot;form-control&quot; id=&quot;name&quot; name=&quot;name&quot; type=&quot;text&quot; placeholder=&quot;Name&quot;&gt;
        &lt;small id=&quot;name-help&quot; class=&quot;text-muted&quot;&gt;Your first and last name&lt;/small&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form-group&quot;&gt;
        &lt;label class=&quot;form-label&quot; for=&quot;color&quot;&gt;Favorite color&lt;/label&gt;
        &lt;select id=&quot;color&quot; name=&quot;color&quot; class=&quot;col-4 form-control&quot;&gt;
            &lt;option value=&quot;&quot;&gt;&lt;/option&gt;
        @foreach (var it in Html.ContactColors())
        {
            &lt;option value=&quot;@it.Key&quot;&gt;@it.Value&lt;/option&gt;
        }
        &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form-group&quot;&gt;
        &lt;label class=&quot;form-check-label&quot;&gt;Favorite Film Genres&lt;/label&gt;
        &lt;div class=&quot;form-check&quot;&gt;
        @foreach (var it in Html.ContactGenres())
        {
            &lt;div class=&quot;custom-control custom-checkbox&quot;&gt;
                &lt;input type=&quot;checkbox&quot; id=&quot;filmGenres-@it&quot; name=&quot;filmGenres&quot; value=&quot;@it&quot; class=&quot;form-check-input&quot;&gt;
                &lt;label class=&quot;form-check-label&quot; for=&quot;filmGenres-@it&quot;&gt;@it&lt;/label&gt;
            &lt;/div&gt;
        }
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form-group&quot;&gt;
        &lt;input class=&quot;form-control col-3&quot; name=&quot;age&quot; type=&quot;number&quot; min=&quot;13&quot; placeholder=&quot;Age&quot;&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form-group&quot;&gt;
        &lt;div class=&quot;form-check&quot;&gt;
            &lt;input class=&quot; form-check-input&quot; id=&quot;agree&quot; name=&quot;agree&quot; type=&quot;checkbox&quot; value=&quot;true&quot;&gt;
            &lt;label class=&quot;form-check-label&quot; for=&quot;agree&quot;&gt;Agree to terms and conditions&lt;/label&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form-group&quot;&gt;
        &lt;button class=&quot;btn btn-primary&quot; type=&quot;submit&quot;&gt;Add Contact&lt;/button&gt;
        &lt;a href=&quot;/client-razor/contacts/&quot;&gt;reset&lt;/a&gt;
    &lt;/div&gt;
&lt;/form&gt;

&lt;table id=&quot;results&quot;&gt;&lt;/table&gt;

@section scripts
{
    &lt;script&gt;
        var CONTACTS = @((await Gateway.SendAsync(new GetContacts())).Results.AsRawJson());
    
        $(&quot;form&quot;).bootstrapForm({
            success: function (r) {
                $(&quot;form&quot;)[0].reset();
                CONTACTS.push(r.result);
                render();
            }
        });
        $(document).bindHandlers({
            deleteContact: function(id) {
                if (!confirm('Are you sure?')) 
                    return;
                $.post(&quot;/contacts/&quot; + id + &quot;/delete&quot;, function(r) {
                   $.getJSON(&quot;/contacts&quot;, function(r) {
                       CONTACTS = r.results;
                       render();
                   }) 
                });
            }
        });
    
        function contactRow(contact) {
            return '&lt;tr style=&quot;background:' + contact.color + '&quot;&gt;' +
                    '&lt;td&gt;' + contact.title + ' ' + contact.name + ' (' + contact.age + ')&lt;/td&gt;' +
                    '&lt;td&gt;&lt;a href=&quot;/client-razor/contacts/' + contact.id + '/edit&quot;&gt;edit&lt;/a&gt;&lt;/td&gt;' +
                    '&lt;td&gt;&lt;button class=&quot;btn btn-sm btn-primary&quot; data-click=&quot;deleteContact:' + contact.id + '&quot;&gt;delete&lt;/button&gt;&lt;/td&gt;' +
                '&lt;/tr&gt;';
        }
        
        function render() {
            var sb = &quot;&quot;;
            if (CONTACTS.length &gt; 0) {
                for (var i=0; i&lt;CONTACTS.length; i++) {
                    sb += contactRow(CONTACTS[i])
                }
            } else {
                sb = &quot;&lt;tr&gt;&lt;td&gt;There are no contacts.&lt;/td&gt;&lt;/tr&gt;&quot;;
            }
            $(&quot;#results&quot;).html(&quot;&lt;tbody&gt;&quot; + sb + &quot;&lt;/tbody&gt;&quot;);
        }
    
        render();
    &lt;/script&gt;
}
</code></pre>
