

<h2 id="advanced-native-type-code-gen">Advanced Native Type Code gen<a class="header-anchor" href="javascript:;" onclick="location.hash='#advanced-native-type-code-gen'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>To enable greater flexibility when generating complex Typed DTOs, you can use <code>[Emit{Language}]</code> attributes to generate code before each type or property.</p>
<p>These attributes can be used to generate different attributes or annotations to enable client validation for different validation libraries in different languages, e.g:</p>
<pre><code class="language-csharp">[EmitCSharp(&quot;[Validate]&quot;)]
[EmitTypeScript(&quot;@Validate()&quot;)]
[EmitCode(Lang.Swift | Lang.Dart, &quot;@validate()&quot;)]
public class User : IReturn&lt;User&gt;
{
    [EmitCSharp(&quot;[IsNotEmpty]&quot;,&quot;[IsEmail]&quot;)]
    [EmitTypeScript(&quot;@IsNotEmpty()&quot;, &quot;@IsEmail()&quot;)]
    [EmitCode(Lang.Swift | Lang.Dart, new[]{ &quot;@isNotEmpty()&quot;, &quot;@isEmail()&quot; })]
    public string Email { get; set; }
}
</code></pre>
<p>Which will generate <code>[EmitCsharp]</code> code in C# DTOs:</p>
<pre><code class="language-csharp">[Validate]
public partial class User
    : IReturn&lt;User&gt;
{
    [IsNotEmpty]
    [IsEmail]
    public virtual string Email { get; set; }
}
</code></pre>
<p><code>[EmitTypeScript]</code> annotations in TypeScript DTOs:</p>
<pre><code class="language-typescript">@Validate()
export class User implements IReturn&lt;User&gt;
{
    @IsNotEmpty()
    @IsEmail()
    public email: string;

    public constructor(init?: Partial&lt;User&gt;) { (Object as any).assign(this, init); }
    public createResponse() { return new User(); }
    public getTypeName() { return 'User'; }
}
</code></pre>
<p>Whilst the generic <code>[EmitCode]</code> attribute lets you emit the same code in multiple languages with the same syntax.</p>
<h3 id="type-generation-filters">Type Generation Filters<a class="header-anchor" href="javascript:;" onclick="location.hash='#type-generation-filters'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>In addition you can use the <code>PreTypeFilter</code>, <code>InnerTypeFilter</code> &amp; <code>PostTypeFilter</code> to generate source code before and after a Type definition, e.g. this will append the <code>@validate()</code> annotation on non enum types:</p>
<pre><code class="language-csharp">TypeScriptGenerator.PreTypeFilter = (sb, type) =&gt; {
    if (!type.IsEnum.GetValueOrDefault())
    {
        sb.AppendLine(&quot;@Validate()&quot;);
    }
};
</code></pre>
<p>The <code>InnerTypeFilter</code> gets invoked just after the Type Definition which can be used to generate common members for all Types and interfaces, e.g:</p>
<pre><code class="language-csharp">TypeScriptGenerator.InnerTypeFilter = (sb, type) =&gt; {
    sb.AppendLine(&quot;id:string = `${Math.random()}`.substring(2);&quot;);
};
</code></pre>
<p>There's also <code>PrePropertyFilter</code> &amp; <code>PostPropertyFilter</code> for generating source before and after properties, e.g:</p>
<pre><code class="language-csharp">TypeScriptGenerator.PrePropertyFilter = (sb , prop, type) =&gt; {
    if (prop.Name == &quot;Id&quot;)
    {
        sb.AppendLine(&quot;@IsInt()&quot;);
    }
};
</code></pre>
<h3 id="live-examples">Live examples<a class="header-anchor" href="javascript:;" onclick="location.hash='#live-examples'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<ul>
<li><a href="https://stackapis.netcore.io/types/metadata">stackapis.netcore.io/types/metadata</a></li>
</ul>
<p>This model is then used to generate the generated types, which for C# is at <code>/types/csharp</code>.</p>
<h2 id="limitations">Limitations<a class="header-anchor" href="javascript:;" onclick="location.hash='#limitations'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>In order for Add ServiceStack Reference to work consistently across all supported languages without .NET semantic namespaces, DTOs includes an additional restriction due to the semantic differences and limitations in different languages there are some limitations of <a href="http://stackoverflow.com/a/10759250/85785">highly-discouraged bad practices</a> that's not supported across all languages including:</p>
<h4 id="all-dto-type-names-must-be-unique">All DTO Type Names must be unique<a class="header-anchor" href="javascript:;" onclick="location.hash='#all-dto-type-names-must-be-unique'" aria-label="Permalink">&ZeroWidthSpace;</a></h4>
<p>ServiceStack only requires Request DTO's to be unique, but non .NET languages also require all DTO names to be unique.</p>
<h4 id="no-object-or-interface-properties">No object or Interface properties<a class="header-anchor" href="javascript:;" onclick="location.hash='#no-object-or-interface-properties'" aria-label="Permalink">&ZeroWidthSpace;</a></h4>
<p>It's not possible to generate typed metadata and type information for deserializing unknown types like <code>object</code> or <code>Interface</code> properties.</p>
<h4 id="base-types-must-be-marked-abstract">Base types must be marked abstract<a class="header-anchor" href="javascript:;" onclick="location.hash='#base-types-must-be-marked-abstract'" aria-label="Permalink">&ZeroWidthSpace;</a></h4>
<p>When using inheritance in DTO's any Base types must be marked abstract.</p>
<p>For C#, VB .NET and F# languages you can get around these limitations by sharing the <strong>ServiceModel.dll</strong> where your DTOs are defined instead.</p>
<h3 id="using-with-iis-windows-authentication">Using with IIS Windows Authentication<a class="header-anchor" href="javascript:;" onclick="location.hash='#using-with-iis-windows-authentication'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>If you have configured your NativeTypes service to run on IIS with Windows Authentication enabled, you need to ensure that the <strong>/types</strong> routes are reachable and do not require the system-level authentication from IIS. To accomplish this, add the following to <code>&lt;system.web&gt;</code> in Web.config.</p>
<pre><code class="language-xml">&lt;authorization&gt;
    &lt;allow users=&quot;?&quot; /&gt;
&lt;/authorization&gt;
</code></pre>
